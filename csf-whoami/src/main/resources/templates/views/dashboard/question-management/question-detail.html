<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:th="http://www.thymeleaf.org" lang="ko"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorator="layout/default">

    <link rel="stylesheet" type="text/css" th:href="@{/css/theme.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/css/common.css}">
    <th:block layout:fragment="content">
        <!-- Begin 일반 게시물 -->
        <div class="app-body post-list">
            <main class="main">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-lg-12">
                              <form th:action="@{/me/questions/detail}" th:object="${datas}" method="POST">
                                <div class="card">
                                    <div class="card-header">
                                        <th:block th:utext="Title"></th:block>
                                    </div>
                                    <div class="card-body">
                                        <div class="pt-3 overscroll-mobile ">
                                            <!-- Begin info -->
                                            <table class="table custom-table table-bordered w-250">
                                                <tbody>
                                                    <tr>
                                                        <td class="font-weight-bold">Group name</td>
                                                        <td colspan="5">
                                                            <div class="input-group">
                                                                <input type="text" class="form-control" placeholder="Input option"
                                                                       th:value="${datas == null ? '' : datas.groupName}" readonly="readonly">
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td class="font-weight-bold">Channel name</td>
                                                        <td colspan="5">
                                                            <div class="input-channel">
                                                                <input type="text" class="form-control" placeholder="Input option"
                                                                       th:value="${datas == null ? '' : datas.channelName}" readonly="readonly">
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td class="font-weight-bold">Question type</td>
                                                        <td colspan="5">
                                                            <div class="input-group">
                                                                <select class="form-control" id="typeSelect" th:name="questionType">
                                                                    <option value="0">Please select Channel</option>
                                                                    <option th:each="data, index : ${types}" 
                                                                            th:value="${data.id}"
                                                                            th:text="${data.typeName}">
                                                                    </option>
                                                                </select>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td class="font-weight-bold">Question</td>
                                                        <td colspan="5">
                                                            <div class="input-group">
                                                                <textarea placeholder="Input description" id="description" class="form-control" rows="5" cols="12" th:name="content">[[${datas.content}]]</textarea>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr class="option-detail">
                                                        <td class="font-weight-bold text-center">Options</td>
                                                        <td colspan="5">
                                                            <!-- add Poll -->
                                                            <div class="options-poll mb-4">
                                                                <th:block th:if="${datas.options != null}">
                                                                    <div id="listOptions">
                                                                        <th:block th:each="data : ${datas.options}">
                                                                            <div class="input-group align-items-center deleteItem">
                                                                                <input type="text" class="form-control" placeholder="Input option"
                                                                                       th:name="options[__${data.priority - 1}__].answer"
                                                                                       th:value="${data.answer}">
                                                                                <button type="button" class="row-delete"><i class="icon-close"></i></button>
                                                                            </div>
                                                                            <div class="hiddenItem">
                                                                                <input hidden="hidden"
                                                                                       class=""
                                                                                       th:name="options[__${data.priority - 1}__].id"
                                                                                       th:value="${data.id}">
                                                                            </div>
                                                                        </th:block>
                                                                    </div>
                                                                </th:block>
                                                                <div class="group-btn-bottom text-right">
                                                                    <button class="btn btn-primary mb-2" type="button" id="btnAddOption">Add option</button>
                                                                </div>
                                                            </div>
                                                            <!-- end Poll -->
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                            <!-- End info -->
                                            <input hidden="hidden" th:name="groupId" th:value="${datas.groupId}">
                                            <input hidden="hidden" th:name="channelId" th:value="${datas.channelId}">
                                            <input hidden="hidden" th:name="id" th:value="${datas.id}">
                                        </div>
                                    </div>
                                    <div class="group-btn-bottom text-right mb-3">
                                        <th:block th:if="${datas == null || #strings.isEmpty(datas.id)}">
                                            <button class="btn btn-primary" type="submit">button.register</button>
                                        </th:block>
                                        <th:block th:if="${datas != null && !#strings.isEmpty(datas.id)}">
                                            <button class="btn btn-primary" type="submit">button.modify</button>
                                        </th:block>
                                        <button class="btn btn-secondary" type="button" th:onclick="|window.location.href='@{/me/questions/management}'|">button.cancel</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </main>
        </div>
        <!-- Import javaScript. -->
        <!-- <div th:include="fragments/modal/oneButtonModal :: oneModal"></div> -->
        <script type="text/javascript" th:src="@{/pageJs/modal.js}"></script>
        <script type="text/javascript" th:src="@{/lib/jquery/jquery.min.js}"></script>
        <script type="text/javascript" th:src="@{/plugin/vendor.min.js}"></script>
        <script th:inline="text" th:src="@{/pageJs/question-mng.js}"></script>
        <!-- END import javaScript. -->
    </th:block>
</html>
