<?xml version="1.0" encoding="utf-8"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">

    <property name="autoIncrement" value="true"/>
    <property name="now" value="now(3)"/>
    <property name="defaultVarchar" value="varchar(255)"/>
    <property name="timestamp" value="timestamp(3)"/>

	<changeSet id="202224071805-1" author="system">
        <createTable tableName="oauth_access_token">
            <column name="authentication_id" type="${defaultVarchar}">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="token_id" 		type="${defaultVarchar}" />
            <column name="token" 			type="blob" />
            <column name="user_name" 		type="${defaultVarchar}" />
            <column name="client_id" 		type="${defaultVarchar}" />
            <column name="authentication" 	type="blob" />
            <column name="refresh_token" 	type="${defaultVarchar}" />
        </createTable>
        <createTable tableName="oauth_refresh_token">
            <column name="token_id" 		type="${defaultVarchar}">
                <constraints nullable="true"/>
            </column>
            <column name="token" 			type="blob">
                <constraints nullable="true"/>
            </column>
            <column name="authentication" 	type="blob">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>
    
    <changeSet id="202224071805-2" author="system">
        <createTable tableName="csf_accounts">
            <column name="id" 				type="bigint"
            								autoIncrement="${autoIncrement}">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="login_id" 		type="${defaultVarchar}" />
            <column name="password" 		type="${defaultVarchar}" />
            <column name="user_id" 			type="bigint" />
            <column name="actived_at" 		type="${timestamp}" />
            <column name="started_at" 		type="date" />
            <column name="finished_at" 		type="date" />
            <column name="mac_address" 		type="${defaultVarchar}" />
            <column name="login_type" 		type="int(1)" />
            <column name="social_token" 	type="${defaultVarchar}" />
            <column name="created_at" 		type="${timestamp}"
            								defaultValueDate="${now}">
                <constraints nullable="false"/>
            </column>
            <column name="created_by" 		type="bigint" />
            <column name="updated_at" 		type="${timestamp}" />
            <column name="updated_by" 		type="bigint" />
            <column name="deleted_at" 		type="${timestamp}" />
            <column name="deleted_by" 		type="bigint" />
        </createTable>
        <createTable tableName="csf_users">
            <column name="id" 				type="bigint"
            								autoIncrement="${autoIncrement}">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="full_name" 		type="${defaultVarchar}">
            	<constraints nullable="false"/>
            </column>
            <column name="phone" 			type="varchar(20)">
            	<constraints nullable="false"/>
            </column>
            <column name="address" 			type="${defaultVarchar}" />
            <column name="email" 			type="${defaultVarchar}" />
            <column name="note" 			type="${defaultVarchar}" />
            <column name="created_at" 		type="${timestamp}"
            								defaultValueDate="${now}">
                <constraints nullable="false"/>
            </column>
            <column name="created_by" 		type="bigint" />
            <column name="updated_at" 		type="${timestamp}" />
            <column name="updated_by" 		type="bigint" />
            <column name="deleted_at" 		type="${timestamp}" />
            <column name="deleted_by" 		type="bigint" />
        </createTable>
    </changeSet>
    <changeSet id="202224071805-3" author="system">
		<createTable tableName="csf_roles">
            <column name="id" 				type="bigint"
            								autoIncrement="${autoIncrement}">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="code" 			type="${defaultVarchar}" />
            <column name="name" 			type="${defaultVarchar}" />
            <column name="note" 			type="${defaultVarchar}" />
            <column name="is_active" 		type="ENUM('Y', 'N')"
            								defaultValueDate="'N'" />
            <column name="created_at" 		type="${timestamp}"
            								defaultValueDate="${now}">
                <constraints nullable="false"/>
            </column>
            <column name="created_by" 		type="bigint" />
            <column name="updated_at" type="${timestamp}" />
            <column name="updated_by" type="bigint" />
            <column name="deleted_at" type="${timestamp}" />
            <column name="deleted_by" type="bigint" />
        </createTable>
        <createTable tableName="csf_account_roles">
            <column name="id" 				type="bigint" 
            								autoIncrement="${autoIncrement}">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="account_id" 		type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="role_id" 			type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="created_at" 		type="${timestamp}"
            								defaultValueDate="${now}">
                <constraints nullable="false"/>
            </column>
            <column name="created_by" 		type="bigint" />
            <column name="updated_at" 		type="${timestamp}" />
            <column name="updated_by" 		type="bigint" />
            <column name="deleted_at" 		type="${timestamp}" />
            <column name="deleted_by" 		type="bigint" />
        </createTable>
        <createIndex tableName="csf_account_roles" indexName="idx_ar_account_id">
            <column name="account_id" type="bigint"/>
        </createIndex>
        <createIndex tableName="csf_account_roles" indexName="idx_ar_role_id">
            <column name="role_id" type="bigint"/>
        </createIndex>
    </changeSet>

    <changeSet id="202224071805-4" author="system">
        <createTable tableName="csf_permissions">
            <column name="id" 				type="bigint"
            								autoIncrement="${autoIncrement}">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="name" type="varchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="display_name_vn" type="${defaultVarchar}">
                <constraints nullable="false"/>
            </column>
            <column name="display_name_en" type="${defaultVarchar}">
                <constraints nullable="false"/>
            </column>
            <column name="created_at" 		type="${timestamp}"
            								defaultValueDate="${now}">
                <constraints nullable="false"/>
            </column>
            <column name="created_by" 		type="bigint" />
            <column name="updated_at" 		type="${timestamp}" />
            <column name="updated_by" 		type="bigint" />
            <column name="deleted_at" 		type="${timestamp}" />
            <column name="deleted_by" 		type="bigint" />
        </createTable>
        <createTable tableName="csf_account_permissions">
            <column name="id" 				type="bigint"
            								autoIncrement="${autoIncrement}">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="account_id" 		type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="permission_id" 	type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="created_at" 		type="${timestamp}"
            								defaultValueDate="${now}">
                <constraints nullable="false"/>
            </column>
            <column name="created_by" 		type="bigint" />
            <column name="updated_at" 		type="${timestamp}" />
            <column name="updated_by" 		type="bigint" />
            <column name="deleted_at" 		type="${timestamp}" />
            <column name="deleted_by" 		type="bigint" />
        </createTable>
        <createIndex tableName="csf_account_permissions" indexName="idx_ap_account_id">
            <column name="account_id" type="bigint"/>
        </createIndex>
        <createIndex tableName="csf_account_permissions" indexName="idx_ap_permission_id">
            <column name="permission_id" type="bigint"/>
        </createIndex>
    </changeSet>
    <changeSet id="202224071805-5" author="system">
        <createTable tableName="w_groups">
            <column name="id" 				type="bigint"
            								autoIncrement="${autoIncrement}">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="display_name_vn" 	type="${defaultVarchar}" />
            <column name="display_name_en" 	type="${defaultVarchar}" />
            <column name="type_id" 			type="bigint" />
            <column name="owner_id" 		type="bigint" />
            <column name="is_publish"		type="ENUM('Y', 'N')"
            								defaultValueDate="'N'" />
            <column name="is_closed"		type="ENUM('Y', 'N')"
            								defaultValueDate="'N'" />
            <column name="is_private"		type="ENUM('Y', 'N')"
            								defaultValueDate="'N'" />
            <column name="is_lock"			type="ENUM('Y', 'N')"
            								defaultValueDate="'N'" />		
            <column name="description"	 	type="${defaultVarchar}" />
            <column name="url"	 			type="${defaultVarchar}" />
            <column name="actived_at" 		type="${timestamp}" defaultValueDate="${now}" />								
            <column name="created_at" 		type="${timestamp}"
            								defaultValueDate="${now}">
                <constraints nullable="false"/>
            </column>
            <column name="created_by" 		type="bigint" />
            <column name="updated_at" 		type="${timestamp}" />
            <column name="updated_by" 		type="bigint" />
            <column name="deleted_at" 		type="${timestamp}" />
            <column name="deleted_by" 		type="bigint" />
        </createTable>
        <createTable tableName="w_channels">
            <column name="id" 				type="bigint"
            								autoIncrement="${autoIncrement}">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="display_name_vn" 	type="${defaultVarchar}">
                <constraints nullable="false"/>
            </column>
            <column name="display_name_en" 	type="${defaultVarchar}">
                <constraints nullable="false"/>
            </column>
            <column name="url" 				type="${defaultVarchar}">
                <constraints nullable="false"/>
            </column>
            <column name="group_id" 		type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="is_closed" 		type="ENUM('Y', 'N')"
            								defaultValueDate="'N'" />
            <column name="is_private" 		type="ENUM('Y', 'N')"
            								defaultValueDate="'N'" />
			<column name="is_lock"	 		type="ENUM('Y', 'N')"
            								defaultValueDate="'N'" />
			<column name="description" 		type="${defaultVarchar}" />
            <column name="created_at" 		type="${timestamp}"
            								defaultValueDate="${now}">
                <constraints nullable="false"/>
            </column>
            <column name="created_by" 		type="bigint" />
            <column name="updated_at" 		type="${timestamp}" />
            <column name="updated_by" 		type="bigint" />
            <column name="deleted_at" 		type="${timestamp}" />
            <column name="deleted_by" 		type="bigint" />
        </createTable>
        <createTable tableName="w_pin_code">
            <column name="id" 				type="bigint"
            								autoIncrement="${autoIncrement}">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="type_id" 			type="bigint" />
            <column name="content_id" 		type="bigint" />
            <column name="pin_code" 		type="varchar(10)">
                <constraints nullable="false"/>
            </column>
            <column name="start_date" 		type="date" />
            <column name="end_date" 		type="date" />
            <column name="is_private"		type="ENUM('Y', 'N')"
            								defaultValueDate="'N'" />
            <column name="actived_at" 		type="${timestamp}" />
            <column name="created_at" 		type="${timestamp}" 
            								defaultValueDate="${now}">
                <constraints nullable="false"/>
            </column>
            <column name="created_by" 		type="bigint" />
            <column name="updated_at" 		type="${timestamp}" />
            <column name="updated_by" 		type="bigint" />
            <column name="deleted_at" 		type="${timestamp}" />
            <column name="deleted_by" 		type="bigint" />
        </createTable>
    </changeSet>
    <changeSet id="202224071805-6" author="system">
        <createTable tableName="w_questions">
            <column name="id" 				type="bigint"
            								autoIncrement="${autoIncrement}">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="content" 		type="${defaultVarchar}">
                <constraints nullable="false"/>
            </column>
            <column name="owner_id" 		type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="super_size"	 	type="ENUM('Y', 'N')"
            								defaultValueDate="'N'" />
            <column name="random_answer" 	type="ENUM('Y', 'N')"
            								defaultValueDate="'N'" />
            <column name="is_lock"	 		type="ENUM('Y', 'N')"
            								defaultValueDate="'N'" />
            <column name="is_publish"		type="ENUM('Y', 'N')"
            								defaultValueDate="'N'" />
            <column name="is_private" 		type="ENUM('Y', 'N')"
            								defaultValueDate="'N'" />
            <column name="multiple_choice"	type="ENUM('Y', 'N')"
            								defaultValueDate="'N'" />
            <column name="created_at" 		type="${timestamp}"
            								defaultValueDate="${now}">
                <constraints nullable="false"/>
            </column>
            <column name="created_by" 		type="bigint" />
            <column name="updated_at" 		type="${timestamp}" />
            <column name="updated_by" 		type="bigint" />
            <column name="deleted_at" 		type="${timestamp}" />
            <column name="deleted_by" 		type="bigint" />
        </createTable>
        <createTable tableName="w_channel_questions">
            <column name="id" 				type="bigint"
            								autoIncrement="${autoIncrement}">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="channel_id" 		type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="question_id" 		type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="created_at" 		type="${timestamp}"
            								defaultValueDate="${now}">
                <constraints nullable="false"/>
            </column>
            <column name="created_by" 		type="bigint" />
            <column name="updated_at" 		type="${timestamp}" />
            <column name="updated_by" 		type="bigint" />
            <column name="deleted_at" 		type="${timestamp}" />
            <column name="deleted_by" 		type="bigint" />
        </createTable>
    </changeSet>
    <changeSet id="202224071805-7" author="system">
    	<createTable tableName="w_menus">
            <column name="id" 				type="bigint"
            								autoIncrement="${autoIncrement}">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="display_name_vn" 	type="${defaultVarchar}">
                <constraints nullable="false"/>
            </column>
            <column name="display_name_en" 	type="${defaultVarchar}">
                <constraints nullable="false"/>
            </column>
            <column name="link_screen" 		type="${defaultVarchar}">
                <constraints nullable="false"/>
            </column>
            <column name="description" 		type="${defaultVarchar}" />
            <column name="locale" 			type="varchar(3)">
                <constraints nullable="false"/>
            </column>
            <column name="parent_id" 		type="bigint" />
            <column name="created_at" 		type="${timestamp}"
            								defaultValueDate="${now}">
                <constraints nullable="false"/>
            </column>
            <column name="created_by" 		type="bigint" />
            <column name="updated_at" 		type="${timestamp}" />
            <column name="updated_by" 		type="bigint" />
            <column name="deleted_at" 		type="${timestamp}" />
            <column name="deleted_by" 		type="bigint" />
        </createTable>
    </changeSet>
</databaseChangeLog>
